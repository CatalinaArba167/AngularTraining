<h1 *ngIf="product"> Add {{product.productName}}</h1>
<h1 *ngIf="product"> Edit {{product.productName}}</h1>
<form [formGroup]="myForm" (submit)="handleSave()">
  <div>
    <label for="name"><b>Name</b></label>
    <input id="name" type="text" formControlName="name" required />
    <div *ngIf="myForm.get('name')?.touched && myForm.get('name')?.invalid">
      <div *ngIf="myForm.get('name')?.hasError('required')">
        Name is required.
      </div>
      <div *ngIf="myForm.get('name')?.hasError('minlength')">
        Name must be at least 4 characters long.
      </div>
    </div>
  </div>

  <div>
    <label for="category"><b>Category</b></label>
    <input id="category" type="text" formControlName="category" />
    <div
      *ngIf="myForm.get('category')?.touched && myForm.get('category')?.invalid"
    >
      <div *ngIf="myForm.get('category')?.hasError('required')">
        Category is required.
      </div>
      <div *ngIf="myForm.get('category')?.hasError('minlength')">
        Category must be at least 4 characters long.
      </div>
    </div>
  </div>

  <div>
    <label for="image"><b>Image</b></label>
    <input id="image" type="text" formControlName="image" />
    <div *ngIf="myForm.get('image')?.touched && myForm.get('image')?.invalid">
      <div *ngIf="myForm.get('image')?.hasError('required')">
        Image is required.
      </div>
      <div *ngIf="myForm.get('image')?.hasError('minlength')">
        Image URL must be at least 4 characters long.
      </div>
      <div *ngIf="myForm.get('image')?.hasError('invalidImageUrl')">
        Invalid image URL.
      </div>
    </div>
  </div>

  <div>
    <label for="price"><b>Price</b></label>
    <input id="price" type="text" formControlName="price" />
    <div *ngIf="myForm.get('price')?.touched && myForm.get('price')?.invalid">
      <div *ngIf="myForm.get('price')?.hasError('required')">
        Price is required.
      </div>
      <div *ngIf="myForm.get('price')?.hasError('pattern')">
        Price must be a valid number with up to 2 decimal places.
      </div>
    </div>
  </div>

  <div>
    <label for="description"><b>Description</b></label>
    <input id="description" type="text" formControlName="description" />
    <div
      *ngIf="
        myForm.get('description')?.touched && myForm.get('description')?.invalid
      "
    >
      <div *ngIf="myForm.get('description')?.hasError('required')">
        Description is required.
      </div>
      <div *ngIf="myForm.get('description')?.hasError('minlength')">
        Description must be at least 10 characters long.
      </div>
    </div>
  </div>
</form>
<div class="buttons-container">
    <button class="button-default" [routerLink]="['/products']" >Cancel</button>
    <button class="button-default" [routerLink]="['/products']" (click)="handleSave()" [disabled]="myForm.invalid">Save</button>
  </div>
